#include <stdio.h>

int main() {
    int N_PERIODS, cmdCode, i  = 0 ;
    float initialBalance, PENALTY_FEE, amount  = 0.0 ;
    float currentBalance = 0.0 ; 
    float totalPenalties = 0.0 ;
    float APR = 0.0 ;
    float Interest = 0.0 ;
    
    if (scanf( "%f %f %d", &initialBalance, &PENALTY_FEE, &N_PERIODS ) != 3 ) {
        return 1 ;
    }//end if

    currentBalance = initialBalance ;
    
    printf( "Starting Balance: %.2f\n" , initialBalance ) ;
    
    
    for( i = 1 ; i <= N_PERIODS ; i++ ) {
        
        if(scanf( "%d %f", &cmdCode, &amount ) != 2 ) {
            break ;
        }//end if

        printf( "--- Month %d ---\n" , i ) ;
        
        switch(cmdCode) { 
        case 1:
            currentBalance += amount ;
            printf( "Deposit %.2f\n" , amount ) ;
            break ;

        case 2:
            if(amount <= currentBalance ) {
                currentBalance -= amount ;
                printf( "Withdrawal %.2f\n" , amount ) ;
                break ;
            }else if( amount > currentBalance ) {
                totalPenalties += PENALTY_FEE ;
                printf( "WITHDRAWAL FAILED. Penalty %.2f applied.\n" , PENALTY_FEE ) ;
                break ;
            }
            break ;

        case 3:
            if( currentBalance < 1000.00 ) {
                APR = 1.0 ;
            }else if( currentBalance >= 1000.00 ) {
                APR = 2.5 ;
            }//end if
            Interest = currentBalance * ( ( APR / 100 ) / 12 ) ;
            currentBalance += Interest ;
            printf( "Interest: %.2f (Rate: %.2f%%)\n" ,Interest , APR ) ;
            break ;

        default:
            printf( "ERROR: Invalid Command\n" ) ;           
            break ;

        }//end switch
    }//end for
    
    printf( "Final Balance: %.2f\n" , currentBalance ) ;
    printf( "Total Penalties: %.2f\n" , totalPenalties ) ;

    return 0 ;
}//end function
